<div id="content-wrapper">
  <app-error [message]="errorMsg"></app-error>
  <app-success [message]="successMsg"></app-success>
  <div class="container-fluid">
    <h1 class="h3 mb-2 text-gray-800">Listado de Tipos</h1>
    <p class="mb-4">
      Se puede encontrar un listado de los tipos que existen en el sistema dados
      un Ã¡rea y un tema
    </p>

    <!-- DataTales Example -->
    <div class="card shadow mb-4">
      <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">Listado</h6>
      </div>
      <div class="card-body">
        <div class="form-row justify-content-center">
          <div class="col-md-4 mb-3 text-center">
            <span>Area</span>
            <select
              class="custom-select"
              (change)="onAreaSelected($event.target.value)"
            >
              <option *ngFor="let area of areas" [value]="area.id"
                >{{ area.name }}
              </option>
            </select>
          </div>
          <div class="col-md-4 mb-3 text-center">
            <span>Tema</span>
            <select
              class="custom-select"
              (change)="onTopicSelected($event.target.value)"
            >
              <option *ngFor="let topic of topics" [value]="topic.id">{{
                topic.name
              }}</option>
            </select>
          </div>
        </div>
        <!-- results -->
        <div class="d-flex flex-wrap align-items-center justify-content-center">
          <div class="col-4 mb-4" *ngFor="let type of data">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">
                  {{ type.name }}

                  <button
                    type="button btn btn-danger btn-sm float-right"
                    class="close"
                    aria-label="Close"
                    (click)="removeType(type.id)"
                  >
                    <i class="far fa-times-circle text-danger"></i>
                  </button>
                </h5>
                <div *ngIf="type.additionalFields.length">
                  <p>
                    <span
                      class="font-weight-normal text-uppercase font-weight-bolder"
                      >Id</span
                    >
                    {{ type.id }}
                  </p>
                  <h6 class="card-subtitle mb-2 text-muted">
                    Campos adicionales
                  </h6>
                  <ul
                    class="list-group"
                    *ngFor="let af of type.additionalFields"
                  >
                    <div class="row">
                      <div class="col-6">
                        <p>
                          <span
                            class="font-weight-normal text-uppercase font-weight-bolder"
                            >Nombre</span
                          >
                          {{ af.name }}
                          <br />
                          <span
                            class="font-weight-normal text-uppercase font-weight-bolder"
                            >Tipo</span
                          >
                          {{ af.fieldType }}
                        </p>
                      </div>
                      <div class="col-6" *ngIf="!!af.range.length">
                        <span
                          class="font-weight-normal text-uppercase font-weight-bolder"
                          >Rango</span
                        >
                        <ul class="list-group list-group-flush">
                          <li
                            class="list-group-item"
                            *ngFor="let val of af.range"
                          >
                            {{ val }}
                          </li>
                        </ul>
                      </div>
                    </div>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- /.container-fluid -->
</div>
